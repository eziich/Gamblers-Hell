@inject NavigationManager Navigation

<MudDialog Class=" d-flex overflow-x-hidden" Style="background-color:#1f1f1f">
    <TitleContent>
        <MudItem xs="12" sm="12" md="12" Class="d-flex align-items-center justify-content-center">
            <MudText Typo="Typo.h5" Style="color:red">Kingslayer</MudText>
        </MudItem>
    </TitleContent>
    <DialogContent>

        <MudHidden Breakpoint="Breakpoint.SmAndDown">
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-column justify-content-center align-content-center align-items-center mt-2 overflow-hidden">
                <MudImage Src="GamesComponents/BlackjackComponents/BlackjackFinalGameThrone.jpg" Width="550" Height="350"></MudImage>
            </MudItem>
        </MudHidden>

        <MudHidden Breakpoint="Breakpoint.MdAndUp">
            <MudItem xs="12" sm="12" md="12" Class="d-flex flex-column justify-content-center align-content-center align-items-center mt-2 overflow-hidden">
                <MudImage Src="GamesComponents/BlackjackComponents/BlackjackFinalGameThrone.jpg" Width="300" Height="200"></MudImage>
            </MudItem>
        </MudHidden>

        <MudItem xs="12" sm="12" md="12" Class="d-flex flex-column justify-content-center align-content-center align-items-center mt-2 overflow-y-hidden">
            <MudText Style="color:red;" Align="Align.Center">
                You have two choices: continue playing other games to accumulate more wealth or proceed to the final challenge.
                By selecting "Face the King," you agree to enter the ultimate game against King Satan.
                Defeating King Satan will grant you victory over Gambler’s Hell, and if you finish with a high cash total, your name will be recorded on the List of Rulers.
                Once you start the final game, you cannot return to earn more money.
                Losing to King Satan or leaving the game’s page will automatically trigger 'Soultake,' resulting in the permanent deletion of your account.
                Choose wisely.
            </MudText>
        </MudItem>

    </DialogContent>
    <DialogActions>
        <MudItem xs="12" sm="12" md="12" Class="d-flex flex-row align-items-center justify-content-center">
            <MudButton Color="Color.Primary" OnClick="Cancel">Cancel</MudButton>
            <MudButton Disabled="_disableButtonsOnInit" Style="color:red" OnClick="Submit">Face the King</MudButton>
        </MudItem>
    </DialogActions>
</MudDialog>

@code {
    public bool _disableButtonsOnInit = true;

    [CascadingParameter]
    private MudDialogInstance MudDialog { get; set; }

    private void Cancel() => MudDialog.Cancel();

    protected override async Task OnInitializedAsync()
    {
        await Task.Delay(5000);
        _disableButtonsOnInit = false;
    }

    private void Submit()
    {
        Navigation.NavigateTo("/treachery");
        MudDialog.Close(DialogResult.Ok(true));
    }

}